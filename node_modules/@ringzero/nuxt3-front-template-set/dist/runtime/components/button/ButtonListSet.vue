<template>
  <div class="ButtonListSet">
    <template v-for="(item, i) in items" :key="i">
      <ButtonBasic
        v-if="item.type !== LISTBUTTON_TYPE.DISABLED && item.type !== LISTBUTTON_TYPE.LINK"
        class="ListItem"
        :class="{
          Actived: item.value === input,
        }"
        :style="item.style"
        :text="item.text"
        :beforIcon="item.icon?.layout !== POSITION.RIGHT ? item.icon?.icon : undefined"
        :afterIcon="item.icon?.layout === POSITION.RIGHT ? item.icon?.icon : undefined"
        :iconTop="item.icon?.top"
        :iconSize="24"
        :size="small ? '12px' : '14px'"
        :height="small ? 26 : undefined"
        :color="item.value === input ? useGetThemeColor(color) : useColor(THEME_COLOR.color)"
        :backcolor="useGetThemeColor(color)"
        :rotation="item.icon?.rotation"
        :align="'flex-start'"
        @click="onChange(item.value)"
      />
      <div
        v-if="item.type === LISTBUTTON_TYPE.DISABLED"
        class="ListDisableItem"
        :style="{ height: small ? 26 : undefined }"
      >
        {{ item.text }}
      </div>
      <div
        v-if="item.type === LISTBUTTON_TYPE.LINK"
        class="ListLinkItem"
        :style="{ height: small ? 26 : undefined }"
        @click="onChange(item.value)"
      >
        {{ item.text }}
      </div>
    </template>
  </div>
</template>

<script setup lang="ts">
/** リストセット */
import { THEME_COLOR, POSITION } from '../../composables/constants'
import { type ListButtonProps, LISTBUTTON_TYPE } from '../../components/common'
import { ref, watch } from 'vue'
import { useColor, useGetThemeColor } from '../../composables/colors'

interface Props {
  value: string | number | undefined
  items?: ListButtonProps[]
  color?: string
  small?: boolean
}

const props = withDefaults(defineProps<Props>(), {
  inline: false,
  color: 'primary',
})

const emits = defineEmits<{ (e: 'update:value', item: any): void }>()
const input = ref(props.value)

function onChange(value: any) {
  input.value = value
  emits('update:value', value)
}
watch(
  () => props.value,
  (value) => {
    input.value = value
  }
)
</script>

<style scoped>
.ListLinkItem {
  display: flex;
  justify-content: flex-start;
  align-items: center;
  padding: 0px 16px;
  font-size: 14px;
  color: rgba(var(--r-color-link), 1);
  text-decoration: underline;
}
.ListLinkItem:hover {
  opacity: 0.6;
}

.ListDisableItem {
  display: flex;
  justify-content: flex-start;
  align-items: center;
  padding: 0 16px;
  font-size: 14px;
  color: rgba(var(--r-color-disabled), 1);
}

.ListItem {
  padding: 0 16px;
}
.ListItem ::v-deep(.Back) {
  transition: opacity 0.5s ease;
  opacity: 0 !important;
}
.ListItem:hover ::v-deep(.Back) {
  opacity: 0.07 !important;
}
.ListItem:active ::v-deep(.Back) {
  opacity: 0.1 !important;
}
.ListItem.Actived ::v-deep(.Back) {
  opacity: 0.1 !important;
}
</style>
