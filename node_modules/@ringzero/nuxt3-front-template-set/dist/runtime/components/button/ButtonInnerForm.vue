<template>
  <div
    class="ButtonInnerForm"
    :class="{
      left: align === ALIGN.LEFT,
      right: align === ALIGN.RIGHT,
    }"
    :style="{
      width: width ? width + 'px' : undefined,
      minWidth: width ? width + 'px' : undefined,
      maxWidth: width ? width + 'px' : undefined,
      height: height ? height + 'px' : undefined,
      minHeight: height ? height + 'px' : undefined,
      maxHeight: height ? height + 'px' : undefined,
    }"
  >
    <div
      class="Back"
      :style="{
        backgroundColor: (isDark() ? useColor(THEME_COLOR.color) : backColor) || useColor(THEME_COLOR.primary),
      }"
    ></div>
    <div
      :style="{
        display: 'flex',
        justifyContent: 'center',
        width: width ? width + 'px' : undefined,
        minWidth: width ? width + 'px' : undefined,
        maxWidth: width ? width + 'px' : undefined,
      }"
    >
      <v-icon
        :icon="icon"
        :size="size"
        :color="color || (isDark() ? useColor(THEME_COLOR.color) : useColor(THEME_COLOR.primary))"
        :style="iconStyle"
      />
    </div>
  </div>
</template>

<script setup lang="ts">
import { ALIGN, THEME_COLOR } from '../../composables/constants'
import { isDark, useColor } from '../../composables/colors'

/**===================================================================================================================
   * フォームの内側に配置するボタン
   ===================================================================================================================**/
//------------------------------------------------------------------------------------------------------------
// 引数
//------------------------------------------------------------------------------------------------------------
interface Props {
  icon?: string
  iconStyle?: any
  size?: number
  color?: string
  backColor?: string
  align?: string
  width?: number
  height?: number
}

const props = withDefaults(defineProps<Props>(), { icon: 'mdi-menu-left', size: 20, align: ALIGN.RIGHT })

//------------------------------------------------------------------------------------------------------------
// 定数・変数（state）
//------------------------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------------------------
// ライフサイクル
//------------------------------------------------------------------------------------------------------------
/*
  onBeforeMount(() => {
    //記憶した位置、サイズでの復帰を可能にする
  })

  onMounted(() => {
    //window.addEventListener('resize', onGetPosition)
  })

  onBeforeUnmount(() => {
    //window.removeEventListener('resize', onGetPosition)
  })
  */
//------------------------------------------------------------------------------------------------------------
//watch
//------------------------------------------------------------------------------------------------------------
/*
  watch(
    () => props.value,
    (value) => {
      input.value = value
    }
  )
  */
//------------------------------------------------------------------------------------------------------------
// エミット
//------------------------------------------------------------------------------------------------------------
/*
  const emits = defineEmits<{ (e: 'update:value', item: any): void }>()
  const input = ref(props.value)

  function onChange(value: any) {
    input.value = value
    emits('update:value', value)
  }
  */

//------------------------------------------------------------------------------------------------------------
// メソッド
//------------------------------------------------------------------------------------------------------------
</script>

<style scoped>
.ButtonInnerForm {
  position: absolute;
  top: 0px;
  height: 35px;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  cursor: pointer;
  color: rgb(var(--r-color-primary));
}
.ButtonInnerForm .Back {
  position: absolute;
  width: 100%;
  height: 100%;
  opacity: 0;
  background-color: rgb(var(--r-color-primary));
  transition: opacity 0.3s ease;
}
.ButtonInnerForm:hover .Back {
  opacity: 0.2;
}
.ButtonInnerForm:active .Back {
  opacity: 0.1;
  transition: opacity 0.1s ease;
}
.ButtonInnerForm.left {
  left: 0px;
}
.ButtonInnerForm.right {
  right: 0px;
}
</style>
