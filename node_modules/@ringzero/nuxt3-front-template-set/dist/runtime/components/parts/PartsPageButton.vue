<template>
  <!-- disable -->
  <li class="v-pagination__item" :class="{ 'v-pagination__item--is-active': isActive }">
    <v-btn
      @click="
        (event: any) => {
          // console.log(event)
          record.onClick(event)
        }
      "
      density="comfortable"
      variant="text"
      size="default"
      :icon="true"
      :disabled="isDisable || record.disabled"
    >
      {{ page }}
    </v-btn>
  </li>
  <!-- default -->
  <!-- active -->
</template>

<script setup lang="ts">
import { ref, watch, type Ref, onMounted, onBeforeUnmount, onBeforeMount } from 'vue'
/**===================================================================================================================
 *
 *
 ===================================================================================================================**/
//------------------------------------------------------------------------------------------------------------
// 引数
//------------------------------------------------------------------------------------------------------------
interface Props {
  isActive: boolean
  disable?: boolean
  page: string
  record: any
  itemKey: string | number
  length: number
}

const props = withDefaults(defineProps<Props>(), {
  page: '',
  itemKey: 0,
  isActive: false,
  disable: true,
  length: 0,
})

//------------------------------------------------------------------------------------------------------------
// 定数・変数（state）
//------------------------------------------------------------------------------------------------------------
const nowLength = ref(props.length)
const isDisable = ref(props.length < Number(props.page))

//------------------------------------------------------------------------------------------------------------
// ライフサイクル
//------------------------------------------------------------------------------------------------------------

onBeforeMount(() => {
  //記憶した位置、サイズでの復帰を可能にする
})

onMounted(() => {
  //window.addEventListener('resize', onGetPosition)
})

onBeforeUnmount(() => {
  //window.removeEventListener('resize', onGetPosition)
})

//------------------------------------------------------------------------------------------------------------
//watch
//------------------------------------------------------------------------------------------------------------
watch(
  () => props.record,
  (value) => {
    // console.log('record', value)
  }
)

watch(
  () => props.length,
  (value) => {
    nowLength.value = value
    isDisable.value = value < Number(props.page)
  }
)

//------------------------------------------------------------------------------------------------------------
//computed
//------------------------------------------------------------------------------------------------------------
/*
const counter: Ref<number> = useState('counter', () => 500)

// computedによりcounter変数の監視が行われる
const doubleCount = computed(() => {
  return counter.value * 2
})
*/
//------------------------------------------------------------------------------------------------------------
// エミット
//------------------------------------------------------------------------------------------------------------
/*
const emits = defineEmits<{ (e: 'update:value', item: any): void }>()
const input = ref(props.value)

function onChange(value: any) {
  input.value = value
  emits('update:value', value)
}
*/

//------------------------------------------------------------------------------------------------------------
// メソッド
//------------------------------------------------------------------------------------------------------------
</script>

<style scoped>
.PageButton {
  position: relative;
  width: 50px;
  height: 50px;
  background: rgb(var(--r-color-primary));
}

.small {
  font-size: 9px;
}
</style>
