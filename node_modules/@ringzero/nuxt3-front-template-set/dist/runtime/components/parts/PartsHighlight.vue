<template>
  <div v-html="body" class="note-custom Code" />
</template>

<script setup lang="ts">
/**===================================================================================================================
   *
   ===================================================================================================================**/
// import * as cheerio from 'cheerio' //追加
import * as cheerio from '@/node_modules/cheerio/lib/index'
// import hljs from 'highlight.js' //追加
import hljs from '@/node_modules/highlight.js/es/common'
// import 'highlight.js/styles/hybrid.css' //追加
//------------------------------------------------------------------------------------------------------------
// 引数
//------------------------------------------------------------------------------------------------------------
export interface Props {
  value: string
}
const props = withDefaults(defineProps<Props>(), {})

//------------------------------------------------------------------------------------------------------------
// 定数・変数（state）
//------------------------------------------------------------------------------------------------------------
const $ = cheerio.load('<pre><code></code></pre>')
$('pre code').each((item: any, elm: any) => {
  const str = props.value
  if (str) {
    const result = hljs.highlightAuto(str.toString())
    $(elm).html(result.value)
    $(elm).addClass('hljs')
  }
})
const body = $.html()
//------------------------------------------------------------------------------------------------------------
// ライフサイクル
//------------------------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------------------------
//watch
//------------------------------------------------------------------------------------------------------------
/*
  watch(
    () => props.value,
    (value) => {
      input.value = value
    }
  )
  //------------------------------------------------------------------------------------------------------------
  //computed
  //------------------------------------------------------------------------------------------------------------
  /*
  const counter: Ref<number> = useState('counter', () => 500)

  // computedによりcounter変数の監視が行われる
  const doubleCount = computed(() => {
    return counter.value * 2
  })
  */
//------------------------------------------------------------------------------------------------------------
// エミット
//------------------------------------------------------------------------------------------------------------
/*
  const emits = defineEmits<{ (e: 'update:value', item: any): void }>()
  const input = ref(props.value)

  function onChange(value: any) {
    input.value = value
    emits('update:value', value)
  }
  */

//------------------------------------------------------------------------------------------------------------
// メソッド
//------------------------------------------------------------------------------------------------------------
</script>

<style scoped>

</style>
