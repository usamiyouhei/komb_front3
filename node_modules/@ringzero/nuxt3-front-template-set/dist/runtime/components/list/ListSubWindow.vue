<template>
  <div class="ListSubWindow" v-show="switcher.opened">
    <div class="Mask" />
    <div class="SubWindow">
      <div class="Title">
        <slot name="title">
          <div class="TitleInner">{{ title }}管理</div>
        </slot>
        <slot name="titleAction" />
        <ButtonIcon
          :icon="ICONS.CLOSE"
          class="CloseButton"
          @click="onClose"
          :color="useColor(THEME_COLOR.reverse)"
          light
        />
      </div>
      <div class="Contents">
        <slot name="contents" />
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { THEME_COLOR, ICONS } from '../../composables/constants'
import { useColor } from '../../composables/colors'
import type { ModalSwitch } from '../../types'
/**===================================================================================================================
   * 
   ===================================================================================================================**/
//------------------------------------------------------------------------------------------------------------
// 引数
//------------------------------------------------------------------------------------------------------------
interface Props {
  name?: string
  title: string
  switcher: ModalSwitch
  modeless?: boolean
}
const props = withDefaults(defineProps<Props>(), {})
//------------------------------------------------------------------------------------------------------------
// 定数・変数（state）
//------------------------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------------------------
// ライフサイクル
//------------------------------------------------------------------------------------------------------------
/*
  onBeforeMount(() => {
    //記憶した位置、サイズでの復帰を可能にする
  })
  
  onMounted(() => {
    //window.addEventListener('resize', onGetPosition)
  })
  
  onBeforeUnmount(() => {
    //window.removeEventListener('resize', onGetPosition)
  })
  */
//------------------------------------------------------------------------------------------------------------
//watch
//------------------------------------------------------------------------------------------------------------
/*
  watch(
    () => props.value,
    (value) => {
      input.value = value
    }
  )
  //------------------------------------------------------------------------------------------------------------
  //computed
  //------------------------------------------------------------------------------------------------------------
  /*
  const counter: Ref<number> = useState('counter', () => 500)
  
  // computedによりcounter変数の監視が行われる
  const doubleCount = computed(() => {
    return counter.value * 2
  })
  */
//------------------------------------------------------------------------------------------------------------
// エミット
//------------------------------------------------------------------------------------------------------------
/*
  const emits = defineEmits<{ (e: 'update:value', item: any): void }>()
  const input = ref(props.value)
  
  function onChange(value: any) {
    input.value = value
    emits('update:value', value)
  }
  */

//------------------------------------------------------------------------------------------------------------
// メソッド
//------------------------------------------------------------------------------------------------------------
async function onClose() {
  props.switcher.opened = false
}
</script>

<style scoped>
.ListSubWindow {
  position: absolute;
  top: 34px;
  left: 0;
  width: 100%;
  height: calc(100% - 34px);
  z-index: 1000;
}
.ListSubWindow .Mask {
  position: absolute;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 0 0 6px 6px;
}
.ListSubWindow .SubWindow {
  position: absolute;
  width: calc(100% - 160px);
  height: calc(100% - 40px);
  top: 20px;
  left: 140px;
  background: rgba(var(--r-color-background));
  border-radius: 6px;
  overflow: hidden;
}
.ListSubWindow .SubWindow .Title {
  position: relative;
  background: rgba(var(--r-color-guide), 1);
  color: rgb(var(--r-color-reverse));
  font-size: 14px;
  width: 100%;
  height: 40px;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  border-radius: 6px 6px 0 0;
}
.ListSubWindow .SubWindow .Title .TitleInner {
  position: relative;
  width: 100%;
  height: 100%;
  padding: 10px 20px 0 10px;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
.ListSubWindow .SubWindow .Title .CloseButton {
  position: absolute !important;
  right: 4px;
  top: 4px;
  cursor: pointer;
}
.ListSubWindow .SubWindow .Contents {
  position: relative;
  width: 100%;
  height: calc(100% - 40px);
}
</style>
